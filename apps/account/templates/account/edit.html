{% extends "base.html" %}
{% load static %}
{% block content %}
  <section id="accountEdit">
    <div>
      <div class="grid gap-4 grid-cols-3 p-4">
        <div class="col-span-full">
          <h1 class="font-semibold text-white text-xl">Kullanıcı Ayarları</h1>
        </div>
        <div class="col-span-full md:col-auto">
          {% if not user.is_verified %}
            <div class="mb-4">
              <div class="bg-sky-100 border-t-4 border-sky-500 rounded-b text-sky-900 px-4 py-3 shadow-md"
                   role="alert">
                <div class="flex">
                  <div class="py-1">
                    <svg class="fill-current h-6 w-6 text-sky-500 mr-4" xmlns="http://www.w3.org/2000/svg"
                         viewBox="0 0 20 20">
                      <path
                        d="M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm12.73-1.41A8 8 0 1 0 4.34 4.34a8 8 0 0 0 11.32 11.32zM9 11V9h2v6H9v-4zm0-6h2v2H9V5z"></path>
                    </svg>
                  </div>
                  <div>
                    <p class="font-bold">Mail adresiniz doğrulanmış değil !</p>
                    <div class="flex space-x-1 text-sm">
                      <span>Lütfen doğrulayınız. Tekrar göndermek için</span>
                      <a href="#"
                         class="underline text-sky-900">tıklayınız</a>.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          {% endif %}
          <div class="p-4 bg-sky-500 rounded shadow">
            <div class="flex sm:block space-x-2 sm:space-x-0">
              <img src="{{ MEDIA_URL }}{{ user.profile.image.url }}" alt="profile-picture"
                   class="w-28 rounded-full">
              <div class="flex flex-col justify-between space-y-1 sm:space-x-0">
                <h1 class="text-2xl text-white font-semibold">{{ user.name|default_if_none:user.email }}</h1>
                <h1 class="text-gray-900 font-semibold">
                  {% if user.is_superuser %}
                    Yönetici
                  {% elif user.is_staff %}
                    Yetkili
                  {% else %}
                    Kullanıcı
                  {% endif %}
                </h1>
                <form id="pi-update-form" action="{% url "account.profilephoto.update" %}" method="post"
                      enctype="multipart/form-data">
                  {% csrf_token %}
                  <input
                    hidden
                    type="file"
                    accept="image/jpg, image/jpeg, image/png"
                    id="file-upload"
                    name="image"/>
                  <button
                    type="button"
                    id="upload-image"
                    class="flex space-x-1 text-white bg-sky-700 hover:bg-sky-800 font-medium rounded text-sm px-8 py-2">
                    Resim Yükle
                  </button>
                  <button type="submit"
                          class="hidden text-white bg-sky-700 hover:bg-sky-800 focus:ring-4 focus:ring-sky-300 font-medium rounded text-sm px-8 py-2 focus:outline-none">
                    <div class="flex space-x-1">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                           stroke="currentColor" class="w-5 h-5 stroke-white">
                        <path stroke-linecap="round" stroke-linejoin="round"
                              d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5"></path>
                      </svg>
                      <span>Kaydet</span>
                    </div>
                  </button>
                </form>
              </div>
            </div>
            <div id="imgPreview" class="hidden">
              <div class="absolute ml-8 cursor-pointer" id="imgReset">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                     stroke="currentColor" class="w-6 h-6 stroke-orange-600">
                  <path stroke-linecap="round" stroke-linejoin="round"
                        d="M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
              </div>
              <img src="" alt="Ön izleme" width="48px" class="mt-4 rounded-full">
            </div>
          </div>
        </div>
        <div class="col-span-full md:col-span-2">
          <div class="p-4 bg-sky-500 rounded shadow">
            <h1 class="text-xl text-white font-semibold mb-2">Genel Bilgiler</h1>
            <form action="{% url "account.update" %}" class="space-y-2" method="post">
              {% csrf_token %}
              <div>
                <label for="email" class="block mb-2 text-sm font-medium text-white">Email</label>
                <input type="text" id="email"
                       value="{{ user.email }}"
                       class="bg-sky-500 border disabled:bg-gray-700 disabled:text-gray-300 border-gray-300 placeholder-white text-white text-sm rounded-lg focus:ring-sky-500 focus:border-sky-500 block w-full p-2.5"
                       placeholder="Email" disabled>
              </div>
              <div>
                <label for="name" class="block mb-2 text-sm font-medium text-white">Kullanıcı adı</label>
                <input type="text" id="name" name="name"
                       value="{{ user.name|default_if_none:"" }}"
                       class="bg-sky-500 border border-gray-300 placeholder-white text-white text-sm rounded-lg focus:ring-sky-500 focus:border-white block w-full p-2.5"
                       placeholder="Kullanıcı adı" required>
              </div>
              <button type="submit"
                      class="flex space-x-1 text-white bg-sky-700 hover:bg-sky-800 font-medium rounded text-sm px-8 py-2">
                Kaydet
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
{% endblock %}
{% block extra_js_files %}
  <script src="{% static "account/js/account.js" %}"></script>
{% endblock %}